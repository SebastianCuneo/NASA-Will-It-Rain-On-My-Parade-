# üöÄ NASA Weather Risk Navigator - Backlog Simplificado (Post-Hackathon)

## üìã Executive Summary

**Contexto:** Reto Post-Hackat√≥n NASA Space Apps Challenge - Validaci√≥n T√©cnica y Conceptual

**Objetivo Estrat√©gico √önico:**  
Reemplazar *mock data* por **datos reales de INUMET** (Montevideo) para **validar la metodolog√≠a del 90th Percentil** y preparar el prototipo para defensa e informe t√©cnico.

**Coherencia con el Proyecto Actual:** ‚úÖ
- Se mantiene el an√°lisis de riesgo basado en **percentil 90**
- Se mantiene el sistema de **4 niveles de riesgo** (MINIMAL, LOW, MODERATE, HIGH)
- Se mantiene la **compatibilidad de actividades** y Plan B
- Se mantiene la **arquitectura FastAPI + React**
- **SE SIMPLIFICA**: Solo Montevideo, sin ML, sin optimizaciones complejas

**Alcance Simplificado:**
- ‚úÖ **S√ç**: Datos reales INUMET (Montevideo, 60K+ registros)
- ‚úÖ **S√ç**: **Solo 3 variables**: Temperatura, Precipitaci√≥n, Humedad
- ‚úÖ **S√ç**: Visualizaciones Plotly con l√≠nea P90
- ‚úÖ **S√ç**: Plan B con Gemini AI (sugerencias inteligentes basadas en riesgo)
- ‚úÖ **S√ç**: Docker y documentaci√≥n para defensa
- ‚ùå **NO**: Machine Learning con Prophet (Visi√≥n futura)
- ‚ùå **NO**: Multi-ciudad (Visi√≥n futura)
- ‚ùå **NO**: Redis/Caching avanzado (Visi√≥n futura)
- ‚ùå **NO**: Viento, UV, sensaci√≥n t√©rmica (Visi√≥n futura)

**Enfoque:** Validaci√≥n t√©cnica con prototipo funcional m√≠nimo

---

## üéØ Objetivo Estrat√©gico Simplificado

### Objetivo √önico: Validar Metodolog√≠a P90 con Datos Reales

**Meta Principal:**  
Demostrar que la metodolog√≠a del 90th Percentil funciona con datos reales de complejidad significativa (60K+ registros INUMET) para **3 variables clim√°ticas clave**: Temperatura, Precipitaci√≥n y Humedad.

**Criterios de √âxito:**
1. ‚úÖ Sistema procesa datos reales INUMET (Montevideo)
2. ‚úÖ C√°lculo P90 funciona para **Temperatura, Precipitaci√≥n y Humedad**
3. ‚úÖ Visualizaci√≥n Plotly muestra l√≠nea P90 para las 3 variables
4. ‚úÖ An√°lisis de riesgo mantiene coherencia (4 niveles por variable)
5. ‚úÖ Plan B con Gemini AI genera sugerencias inteligentes
6. ‚úÖ Prototipo Dockerizado y documentado para defensa

### Validaci√≥n T√©cnica y Conceptual
- ‚úÖ **Validaci√≥n T√©cnica**: Sistema funciona con datasets grandes
- ‚úÖ **Validaci√≥n Conceptual**: P90 detecta extremos clim√°ticos reales
- ‚úÖ **Validaci√≥n Arquitect√≥nica**: FastAPI + React escalable
- ‚úÖ **Artefactos para Informe**: Screenshots, m√©tricas, documentaci√≥n

---

## üìã BACKLOG SIMPLIFICADO - Tareas Priorizadas

### üî• **SECCI√ìN 1: Validar el N√∫cleo Cient√≠fico** (PRIORIDAD CR√çTICA)

**Objetivo:** Migrar a datos reales y asegurar que el c√°lculo del 90th Percentil funciona con complejidad real.

| **ID** | **Tarea** | **Descripci√≥n** | **Entregable** | **Complejidad** |
|--------|-----------|-----------------|----------------|-----------------|
| **T1.1** | Integrar datos INUMET | Migrar `logic.py` para leer `python/inumet_temp_prec.csv` (temperatura, precipitaci√≥n, humedad) | Funci√≥n `load_inumet_data()` funcionando | Media |
| **T1.2** | Filtrar estaci√≥n Montevideo | Implementar filtrado por estaci√≥n: `"Aeropuerto Melilla G3"` | Datos de Montevideo aislados | Baja |
| **T1.3** | Agregaci√≥n horaria ‚Üí diaria | Convertir 60K+ registros a diarios: **max temp, sum precipitaci√≥n, avg humedad** | Funci√≥n `aggregate_daily()` con 3 variables | Media |
| **T1.4** | Validar c√°lculo P90 | Verificar P90 para **temperatura, precipitaci√≥n y humedad** | 3 umbrales P90 calculados | Alta |
| **T1.5** | Actualizar endpoint `/api/risk` | Modificar API para devolver riesgo de las 3 variables | API responde con 3 an√°lisis P90 | Media |
| **T1.6** | Tests de integraci√≥n | Crear tests para carga de datos y c√°lculo P90 (3 variables) | `test_inumet_integration.py` | Media |

**Criterio de Completitud:** Sistema calcula P90 correctamente sobre 60,000+ registros reales de Montevideo.

---

### üü° **SECCI√ìN 2: Prototipo Funcional y Visualizaci√≥n** (PRIORIDAD IMPORTANTE)

**Objetivo:** Integrar Plotly y mostrar visualmente la l√≠nea del 90th Percentil, demostrando viabilidad conceptual.

| **ID** | **Tarea** | **Descripci√≥n** | **Entregable** | **Complejidad** |
|--------|-----------|-----------------|----------------|-----------------|
| **T2.1** | Instalar Plotly | A√±adir `plotly` y `react-plotly.js` a dependencias | `requirements.txt` y `package.json` actualizados | Baja |
| **T2.2** | Endpoint `/api/visualizations` | Crear endpoint que devuelve datos hist√≥ricos + P90 para **3 variables** | API JSON con datos Temp/Precip/Humedad | Media |
| **T2.3** | Componente `PlotlyChart.jsx` | Crear componente React para gr√°ficos interactivos | Componente React funcional | Alta |
| **T2.4** | Gr√°fico de temperatura | Histograma de temperatura con l√≠nea roja P90 | Gr√°fico interactivo temperatura | Alta |
| **T2.5** | Gr√°fico de precipitaci√≥n | Histograma de precipitaci√≥n con l√≠nea roja P90 | Gr√°fico interactivo precipitaci√≥n | Media |
| **T2.6** | Gr√°fico de humedad | Histograma de humedad con l√≠nea roja P90 | Gr√°fico interactivo humedad | Media |
| **T2.7** | Configurar Gemini API | Obtener API key de Google AI Studio y crear archivo `.env` | Variables de entorno configuradas | Baja |
| **T2.8** | Plan B con Gemini AI | Implementar funci√≥n `generateGeminiPlanB()` con prompt optimizado | Sugerencias IA funcionando | Media |
| **T2.9** | Integrar visualizaciones | A√±adir 3 gr√°ficos Plotly en secci√≥n de resultados | UI muestra 3 visualizaciones P90 | Media |
| **T2.10** | Screenshots para informe | Capturar screenshots de visualizaciones y Plan B | Im√°genes para documentaci√≥n | Baja |

**Criterio de Completitud:** Usuario ve gr√°ficos interactivos que muestran claramente la l√≠nea P90 y su significado.

---

### üü° **SECCI√ìN 3: Documentaci√≥n y Defensa** (PRIORIDAD IMPORTANTE)

**Objetivo:** Dockerizar, preparar deployment y obtener artefactos para el Informe T√©cnico.

| **ID** | **Tarea** | **Descripci√≥n** | **Entregable** | **Complejidad** |
|--------|-----------|-----------------|----------------|-----------------|
| **T3.1** | Dockerfile backend | Crear `Dockerfile` para backend FastAPI | `backend/Dockerfile` | Media |
| **T3.2** | Dockerfile frontend | Crear `Dockerfile` para frontend React | `frontend/Dockerfile` | Media |
| **T3.3** | Docker Compose | Crear `docker-compose.yml` para orquestar frontend + backend | Aplicaci√≥n completa con `docker-compose up` | Media |
| **T3.4** | Actualizar README | Documentar instalaci√≥n con Docker, arquitectura de datos reales | `README.md` actualizado | Baja |
| **T3.5** | Crear `TECHNICAL_REPORT.md` | Documentar metodolog√≠a P90, an√°lisis de datos INUMET, resultados | Documento t√©cnico para defensa | Alta |
| **T3.6** | M√©tricas de performance | Medir tiempos de procesamiento (60K registros ‚Üí P90) | Tabla de m√©tricas en informe | Media |
| **T3.7** | Validaci√≥n cient√≠fica | Comparar P90 calculado con literatura climatol√≥gica Uruguay | Validaci√≥n en informe t√©cnico | Alta |

**Criterio de Completitud:** Proyecto Dockerizado, documentado y con m√©tricas/validaciones para defensa t√©cnica.

---

### üîÆ **SECCI√ìN 4: Pr√≥ximos Pasos (Visi√≥n Futura para el Informe)** (PRIORIDAD BAJA)

**Justificaci√≥n:** Estas tareas demuestran escalabilidad y visi√≥n del proyecto, pero NO son cr√≠ticas para validar la metodolog√≠a P90.

| **ID** | **Tarea (Futuro)** | **Justificaci√≥n** | **Valor para Informe** |
|--------|--------------------|-------------------|------------------------|
| **F1** | Machine Learning con Prophet | Predicci√≥n temporal (7-90 d√≠as) aplicando P90 | Demuestra potencial de expansi√≥n |
| **F2** | Expansi√≥n Multi-Ciudad | Soporte para 7 ciudades de Uruguay | Escalabilidad geogr√°fica |
| **F3** | Optimizaci√≥n con Redis | Caching de modelos ML y c√°lculos P90 | Performance en producci√≥n |
| **F4** | PWA y Service Workers | Aplicaci√≥n offline-first | Accesibilidad sin conexi√≥n |
| **F5** | Integraci√≥n NASA APIs | MERRA-2 y GPM en tiempo real | Conexi√≥n directa con datos NASA |
| **F6** | Testing exhaustivo | >80% code coverage con pytest | Calidad de c√≥digo profesional |
| **F7** | CI/CD Pipeline | GitHub Actions para deploy autom√°tico | DevOps moderno |

**Nota para Informe:** Estas tareas se incluyen en la secci√≥n "Trabajo Futuro" del informe t√©cnico, demostrando que el proyecto tiene una hoja de ruta clara y escalable.

---

## üìä Resumen de Entregables Clave

### **Entregables M√≠nimos para Validaci√≥n:**

1. **Sistema Funcional con Datos Reales (3 Variables)**
   - Backend procesa `inumet_temp_prec.csv` (60K+ registros)
   - C√°lculo P90 para: **Temperatura, Precipitaci√≥n, Humedad**
   - Frontend muestra an√°lisis de riesgo P90 con datos reales
   
2. **Visualizaciones P90 (3 Gr√°ficos)**
   - Gr√°fico Plotly de **Temperatura** con l√≠nea P90
   - Gr√°fico Plotly de **Precipitaci√≥n** con l√≠nea P90
   - Gr√°fico Plotly de **Humedad** con l√≠nea P90
   
3. **Plan B con Gemini AI**
   - Sistema de sugerencias inteligentes con Gemini API
   - Respuestas personalizadas basadas en riesgo detectado
   - Integraci√≥n simple (~2-3 segundos de respuesta)
   
4. **Documentaci√≥n T√©cnica**
   - `TECHNICAL_REPORT.md` con metodolog√≠a y resultados
   - Screenshots de visualizaciones (3 variables)
   - M√©tricas de performance

5. **Despliegue**
   - Proyecto Dockerizado (`docker-compose up`)
   - README actualizado con instrucciones

---

## üéØ Criterios de √âxito para el Reto

| **Criterio** | **M√©trica** | **Validaci√≥n** |
|--------------|-------------|----------------|
| **Viabilidad T√©cnica** | Sistema procesa 60K+ registros | ‚úÖ P90 calculado correctamente |
| **Viabilidad Conceptual** | P90 detecta extremos reales | ‚úÖ Visualizaci√≥n muestra patrones |
| **Arquitectura Escalable** | FastAPI + React modular | ‚úÖ C√≥digo organizado y testeado |
| **Documentaci√≥n** | Informe t√©cnico completo | ‚úÖ Metodolog√≠a + Resultados + Futuro |

---

## ‚ö†Ô∏è Tareas ELIMINADAS (Fuera del Alcance)

Las siguientes tareas se eliminan del alcance actual pero se documentan como "Visi√≥n Futura":

### ‚ùå **Eliminado: Prophet Machine Learning**
- **Raz√≥n:** Demasiado complejo para validaci√≥n inicial
- **Valor:** Predicci√≥n temporal no es cr√≠tica para validar P90 hist√≥rico
- **Futuro:** Secci√≥n F1 del backlog

### ‚ùå **Eliminado: Expansi√≥n Multi-Ciudad**  
- **Raz√≥n:** Montevideo es suficiente para validar metodolog√≠a
- **Valor:** Escalabilidad geogr√°fica no es cr√≠tica inicialmente
- **Futuro:** Secci√≥n F2 del backlog

### ‚ùå **Eliminado: Optimizaci√≥n Redis/Caching**
- **Raz√≥n:** Performance es aceptable sin optimizaci√≥n
- **Valor:** No cr√≠tico para prototipo de validaci√≥n
- **Futuro:** Secci√≥n F3 del backlog

---

## üìê Comparaci√≥n: Plan Original vs. Simplificado

| **Aspecto** | **Plan Original (2 semanas)** | **Plan Simplificado (Reto)** |
|-------------|-------------------------------|------------------------------|
| **Alcance** | Full product con ML | Validaci√≥n metodolog√≠a P90 |
| **Tareas** | 50+ tareas complejas | **23 tareas enfocadas** |
| **Variables Clim√°ticas** | M√∫ltiples (Temp, Precip, Viento, UV, etc.) | **Solo 3: Temp, Precip, Humedad** |
| **Ciudades** | 7 ciudades Uruguay | Solo Montevideo |
| **ML/Prophet** | Predicci√≥n 7-90 d√≠as | ‚ùå Eliminado (Visi√≥n futura) |
| **Plan B** | IA generativa (Gemini API) | **IA con Gemini (simplificado)** |
| **Optimizaci√≥n** | Redis + PWA + CI/CD | ‚ùå Eliminado (Visi√≥n futura) |
| **Visualizaciones** | M√∫ltiples gr√°ficos avanzados | **3 gr√°ficos Plotly** (Temp/Precip/Humedad) |
| **Deploy** | Producci√≥n cloud | Docker local + documentaci√≥n |
| **Timeline** | 10 d√≠as h√°biles | Flexible (enfoque en validaci√≥n) |

---

## üöÄ Orden de Ejecuci√≥n Recomendado

### **Fase 1: N√∫cleo Cient√≠fico (Cr√≠tico)**
```
T1.1 ‚Üí T1.2 ‚Üí T1.3 ‚Üí T1.4 ‚Üí T1.5 ‚Üí T1.6
(Integrar INUMET ‚Üí Filtrar Montevideo ‚Üí Agregar ‚Üí Validar P90 ‚Üí API ‚Üí Tests)
```

### **Fase 2: Visualizaci√≥n y Plan B con IA (Importante)**
```
T2.1 ‚Üí T2.2 ‚Üí T2.3 ‚Üí T2.4 ‚Üí T2.5 ‚Üí T2.6 ‚Üí T2.7 ‚Üí T2.8 ‚Üí T2.9 ‚Üí T2.10
(Instalar Plotly ‚Üí Endpoint ‚Üí Componente ‚Üí Gr√°fico Temp ‚Üí Gr√°fico Precip ‚Üí 
 Gr√°fico Humedad ‚Üí Config Gemini ‚Üí Plan B IA ‚Üí Integrar ‚Üí Screenshots)
```

### **Fase 3: Documentaci√≥n (Importante)**
```
T3.1 ‚Üí T3.2 ‚Üí T3.3 ‚Üí T3.4 ‚Üí T3.5 ‚Üí T3.6 ‚Üí T3.7
(Docker Backend ‚Üí Frontend ‚Üí Compose ‚Üí README ‚Üí Informe ‚Üí M√©tricas ‚Üí Validaci√≥n)
```

---

## üìù Dependencias Actualizadas (Simplificadas)

### **Backend** (`requirements.txt`)
```txt
# Core (Ya existentes)
fastapi
uvicorn
pandas
numpy
python-multipart

# Nuevas (Solo esenciales)
plotly  # Para visualizaciones
pytest  # Para tests
```

### **Frontend** (`package.json`)
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1",
    "axios": "^1.6.0",
    "react-plotly.js": "^2.6.0",  // NUEVO - Visualizaciones
    "plotly.js": "^2.27.0"        // NUEVO - Visualizaciones
  }
}
```

**Variables de Entorno** (`.env`):
```env
# Gemini API Key (obtener en https://aistudio.google.com/apikey)
REACT_APP_GEMINI_API_KEY=tu_api_key_aqui
```

**‚ùå NO incluir:** `prophet`, `redis`, o dependencias complejas de ML.  
‚úÖ **S√ç incluir**: Gemini API (solo configuraci√≥n, sin dependencias)

---

## üéì Artefactos para Informe T√©cnico

### **1. Screenshots Requeridos**
- [ ] Dashboard mostrando an√°lisis P90 con datos reales
- [ ] Gr√°fico Plotly con l√≠nea roja P90
- [ ] Comparaci√≥n mock data vs. datos reales
- [ ] Ejemplo de an√°lisis de riesgo HIGH/MODERATE/LOW

### **2. M√©tricas T√©cnicas**
- [ ] Tiempo de procesamiento: 60K registros ‚Üí P90
- [ ] Tama√±o del dataset: MB procesados
- [ ] Precisi√≥n: P90 calculado vs. literatura
- [ ] Performance: Requests/segundo del API

### **3. Validaci√≥n Cient√≠fica**
- [ ] Comparar P90 calculado con datos climatol√≥gicos Uruguay
- [ ] Validar que P90 detecta eventos extremos hist√≥ricos conocidos
- [ ] Justificar elecci√≥n de P90 vs. otros percentiles

---

## ‚úÖ Checklist Final para Defensa

### **T√©cnico**
- [ ] Sistema funciona con `docker-compose up`
- [ ] P90 se calcula correctamente sobre datos INUMET
- [ ] Visualizaciones Plotly muestran l√≠nea P90
- [ ] Tests b√°sicos pasan (`pytest`)

### **Documentaci√≥n**
- [ ] `README.md` actualizado con Docker
- [ ] `TECHNICAL_REPORT.md` completo
- [ ] Screenshots de calidad en documentaci√≥n
- [ ] M√©tricas de performance documentadas

### **Conceptual**
- [ ] Justificaci√≥n cient√≠fica de metodolog√≠a P90
- [ ] Comparaci√≥n con literatura climatol√≥gica
- [ ] Demostraci√≥n de viabilidad t√©cnica y conceptual
- [ ] Roadmap claro de "Trabajo Futuro"

---

## üéØ Resumen Ejecutivo para el Reto

**Objetivo Alcanzado:**  
‚úÖ Validar que la metodolog√≠a del 90th Percentil funciona con datos reales de complejidad significativa (60K+ registros INUMET).

**Entregables Clave:**
1. Sistema funcional procesando datos reales
2. Visualizaciones P90 interactivas
3. Documentaci√≥n t√©cnica completa
4. Prototipo Dockerizado

**Diferenciaci√≥n:**
- ‚úÖ Datos reales vs. mock data
- ‚úÖ Visualizaci√≥n cient√≠fica del P90
- ‚úÖ Arquitectura escalable (FastAPI + React)
- ‚úÖ Roadmap claro hacia producto completo

**Valor para Defensa:**
- Demuestra viabilidad t√©cnica (funciona con datasets grandes)
- Demuestra viabilidad conceptual (P90 detecta extremos)
- Arquitectura lista para escalar (ML, multi-ciudad en roadmap)
- Metodolog√≠a cient√≠ficamente rigurosa (P90 est√°ndar NASA)

---

---

## üîÑ Plan B con Gemini AI - Especificaci√≥n Simplificada

### **Objetivo del Plan B**
Proporcionar sugerencias **inteligentes y personalizadas** de actividades alternativas basadas en el nivel de riesgo detectado, usando Gemini API de forma simple y eficiente.

### **¬øPor Qu√© Gemini AI es Simple?**

‚úÖ **Solo 1 endpoint**: Gemini API REST simple  
‚úÖ **Sin configuraci√≥n compleja**: API Key + URL  
‚úÖ **Sin entrenamiento**: Modelo pre-entrenado  
‚úÖ **Respuesta r√°pida**: 2-3 segundos  
‚úÖ **C√≥digo m√≠nimo**: ~30 l√≠neas

### **Implementaci√≥n Simplificada (Frontend)**

```javascript
// frontend/src/components/WeatherResults.jsx

async function generateGeminiPlanB(riskLevels, originalActivity, location, date) {
  /*
   * Input:
   * - riskLevels = { temperature: "HIGH", precipitation: "LOW", humidity: "MODERATE" }
   * - originalActivity = "beach" | "picnic" | "hiking" | etc.
   * - location = "Montevideo"
   * - date = "2024-03-15"
   * 
   * Output:
   * - Array de 2-3 sugerencias generadas por Gemini
   */
  
  // 1. Construir prompt contextual
  const riskSummary = Object.entries(riskLevels)
    .filter(([_, level]) => level === "HIGH" || level === "MODERATE")
    .map(([variable, level]) => `${variable}: ${level}`)
    .join(", ");
  
  const prompt = `
You are a weather-aware activity planner. 

CONTEXT:
- Location: ${location}
- Date: ${date}
- Planned activity: ${originalActivity}
- Weather risks detected: ${riskSummary}

TASK:
Suggest 2-3 alternative activities that are safe and enjoyable given these weather conditions.

FORMAT (JSON):
[
  {
    "activity": "Activity name",
    "icon": "üèõÔ∏è",
    "reason": "Why this is better"
  }
]

Be concise, practical, and consider local Montevideo activities.
`;

  // 2. Llamar a Gemini API (simple fetch)
  try {
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_API_KEY}`,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          generationConfig: {
            responseMimeType: "application/json",
            responseSchema: {
              type: "ARRAY",
              items: {
                type: "OBJECT",
                properties: {
                  activity: { type: "STRING" },
                  icon: { type: "STRING" },
                  reason: { type: "STRING" }
                }
              }
            }
          }
        })
      }
    );
    
    const data = await response.json();
    const suggestions = JSON.parse(data.candidates[0].content.parts[0].text);
    
    return suggestions.slice(0, 3); // Limitar a 3
    
  } catch (error) {
    console.error("Gemini API Error:", error);
    // Fallback a sugerencia gen√©rica
    return [
      { activity: "Indoor activity", icon: "üè†", reason: "Weather conditions not ideal" }
    ];
  }
}
```

### **Implementaci√≥n en Frontend**

```jsx
// En WeatherResults.jsx

function WeatherResults({ data }) {
  const [planB, setPlanB] = useState(null);
  
  useEffect(() => {
    const riskLevels = {
      temperature: data.temperature_risk.risk_level,
      precipitation: data.precipitation_risk.risk_level,
      humidity: data.humidity_risk.risk_level
    };
    
    // Solo generar Plan B si hay riesgo MODERATE o HIGH
    const hasHighRisk = Object.values(riskLevels).some(
      level => level === "HIGH" || level === "MODERATE"
    );
    
    if (hasHighRisk) {
      const suggestions = generateSimplePlanB(riskLevels, data.activity);
      setPlanB(suggestions);
    }
  }, [data]);
  
  return (
    <div>
      {/* Mostrar an√°lisis de riesgo */}
      {/* ... */}
      
      {/* Mostrar Plan B si existe */}
      {planB && (
        <div className="plan-b-section">
          <h3>üîÑ Plan B - Alternative Suggestions</h3>
          <p>Based on detected weather risks, consider these alternatives:</p>
          {planB.map((suggestion, index) => (
            <div key={index} className="plan-b-card">
              <span className="icon">{suggestion.icon}</span>
              <h4>{suggestion.activity}</h4>
              <p>{suggestion.reason}</p>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

### **Ventajas del Plan B con Gemini AI**

| Aspecto | Ventaja |
|---------|---------|
| **Inteligencia** | Sugerencias personalizadas y contextuales |
| **Adaptabilidad** | Se ajusta a cualquier combinaci√≥n de riesgos |
| **Simplicidad T√©cnica** | Solo 1 API call, ~30 l√≠neas de c√≥digo |
| **Velocidad** | Respuesta en 2-3 segundos (aceptable para UX) |
| **Costo** | ~$0.001 por request (muy econ√≥mico) |
| **Fallback** | Sugerencia gen√©rica si falla API |
| **Valor Educativo** | Demuestra integraci√≥n de IA en el proyecto |

### **Complejidad de Implementaci√≥n**

| Componente | Complejidad | Esfuerzo |
|------------|-------------|----------|
| **API Key Setup** | Baja | 5 minutos (obtener key en Google AI Studio) |
| **Frontend Code** | Baja | ~30 l√≠neas JavaScript |
| **Error Handling** | Baja | Try-catch con fallback |
| **Testing** | Media | Validar respuestas JSON |
| **Total** | **BAJA** | **1-2 horas** |

### **¬øPor Qu√© NO es Complejo?**

‚úÖ **No requiere backend**: Llamada directa desde frontend  
‚úÖ **No requiere entrenamiento**: Modelo pre-entrenado  
‚úÖ **No requiere infraestructura**: Solo una API key  
‚úÖ **JSON Schema**: Gemini devuelve JSON estructurado autom√°ticamente  
‚úÖ **Fallback simple**: Si falla, muestra sugerencia gen√©rica

---

## üìä Estructura de Datos - 3 Variables

### **Datos INUMET (Entrada)**
```csv
datetime,fecha_simple,hora,estacion,temperatura,precipitacion,humedad
2020-01-01 00:00:00,2020-01-01,00:00,Aeropuerto Melilla G3,21.3,0.2,75
2020-01-01 01:00:00,2020-01-01,01:00,Aeropuerto Melilla G3,21.1,0.0,76
...
```

### **Agregaci√≥n Diaria (Procesamiento)**
```python
# logic.py

def aggregate_daily(hourly_data):
    daily = hourly_data.groupby(hourly_data['datetime'].dt.date).agg({
        'temperatura': 'max',      # Temperatura m√°xima del d√≠a
        'precipitacion': 'sum',     # Precipitaci√≥n acumulada
        'humedad': 'mean'           # Humedad promedio
    }).reset_index()
    return daily
```

### **C√°lculo P90 (3 Variables)**
```python
# logic.py

def calculate_p90_multi_variable(monthly_data):
    p90_temp = np.percentile(monthly_data['temperatura'], 90)
    p90_precip = np.percentile(monthly_data['precipitacion'], 90)
    p90_humidity = np.percentile(monthly_data['humedad'], 90)
    
    return {
        'temperature': {
            'p90_threshold': p90_temp,
            'probability': calculate_probability(monthly_data['temperatura'], p90_temp),
            'risk_level': assign_risk_level(probability)
        },
        'precipitation': {
            'p90_threshold': p90_precip,
            'probability': calculate_probability(monthly_data['precipitacion'], p90_precip),
            'risk_level': assign_risk_level(probability)
        },
        'humidity': {
            'p90_threshold': p90_humidity,
            'probability': calculate_probability(monthly_data['humedad'], p90_humidity),
            'risk_level': assign_risk_level(probability)
        }
    }
```

### **Respuesta API (Output)**
```json
{
  "temperature_risk": {
    "probability": 25.5,
    "risk_threshold": 31.2,
    "status_message": "üö® HIGH RISK of extreme heat",
    "risk_level": "HIGH"
  },
  "precipitation_risk": {
    "probability": 8.3,
    "risk_threshold": 45.1,
    "status_message": "‚òÅÔ∏è LOW RISK of significant rain",
    "risk_level": "LOW"
  },
  "humidity_risk": {
    "probability": 15.7,
    "risk_threshold": 82.5,
    "status_message": "‚ö†Ô∏è MODERATE RISK of high humidity",
    "risk_level": "MODERATE"
  }
}
```

---

---

## üîë Gu√≠a R√°pida: Configuraci√≥n Gemini API (5 minutos)

### **Paso 1: Obtener API Key**
1. Ir a: https://aistudio.google.com/apikey
2. Iniciar sesi√≥n con cuenta Google
3. Hacer clic en "Create API Key"
4. Copiar la key generada

### **Paso 2: Configurar en el Proyecto**
```bash
# En la carpeta frontend/
touch .env

# A√±adir al archivo .env:
REACT_APP_GEMINI_API_KEY=tu_api_key_aqui
```

### **Paso 3: Usar en el C√≥digo**
```javascript
// frontend/src/components/WeatherResults.jsx
const GEMINI_API_KEY = process.env.REACT_APP_GEMINI_API_KEY;

// Ya puedes usar la API
const response = await fetch(
  `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${GEMINI_API_KEY}`,
  { /* ... */ }
);
```

### **Paso 4: Gitignore**
```bash
# A√±adir al .gitignore
frontend/.env
*.env
```

### **¬°Listo!** ‚úÖ
Total: 5 minutos de configuraci√≥n, ~30 l√≠neas de c√≥digo.

---

## üìä Resumen Final del Backlog

### **Total de Tareas: 23**

| Secci√≥n | Tareas | Prioridad | Complejidad |
|---------|--------|-----------|-------------|
| **1. N√∫cleo Cient√≠fico** | 6 | üî• Cr√≠tica | Media-Alta |
| **2. Visualizaci√≥n + IA** | 10 | üü° Importante | Media-Alta |
| **3. Documentaci√≥n** | 7 | üü° Importante | Media-Alta |
| **4. Visi√≥n Futura** | 7+ | üîÆ Baja | - |

### **Enfoque del Reto:**
‚úÖ **3 Variables Clim√°ticas**: Temp, Precip, Humedad  
‚úÖ **P90 con Datos Reales**: 60K+ registros INUMET  
‚úÖ **3 Visualizaciones Plotly**: Interactivas con l√≠nea P90  
‚úÖ **Plan B con Gemini AI**: Sugerencias inteligentes (~30 l√≠neas)  
‚úÖ **Docker + Documentaci√≥n**: Listo para defensa  

---

**¬°Backlog actualizado con 3 variables, 3 gr√°ficos Plotly y Plan B con Gemini AI!** ‚úÖüöÄü§ñ
